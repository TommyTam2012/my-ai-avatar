<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My AI Avatar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <!-- HEYGEN AVATAR SCRIPT BELOW -->
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const openBtn = document.createElement("div");
      openBtn.id = "heygen-open";
      openBtn.style.position = "fixed";
      openBtn.style.bottom = "120px";
      openBtn.style.right = "160px";
      openBtn.style.zIndex = "2147483647";
      openBtn.innerHTML = `
        <img src="https://www.taeasla.com/image/TommySirAvatar.png"
             alt="Open Avatar"
             style="width:140px;border-radius:12px;border:2px solid white;
                    box-shadow:0 0 12px rgba(0,153,255,0.5);cursor:pointer;">
      `;
      document.body.appendChild(openBtn);

      let frameWrap = null;

      openBtn.addEventListener("click", () => {
        if (frameWrap) return; // already open
        frameWrap = document.createElement("div");
        frameWrap.id = "heygen-framewrap";
        Object.assign(frameWrap.style, {
          position: "fixed",
          top: "50%",
          left: "50%",
          transform: "translate(-50%, -50%)",
          width: "420px",
          height: "520px", // reduced white area
          zIndex: "2147483647",
          borderRadius: "16px",
          overflow: "hidden",
          boxShadow: "0 0 25px rgba(0,0,0,0.35)",
          background: "#000"
        });
        frameWrap.innerHTML = `
          <div id="heygen-close"
               style="position:absolute;top:6px;right:10px;
                      z-index:2147483648;font-size:22px;
                      color:#fff;cursor:pointer;
                      text-shadow:0 0 6px rgba(0,0,0,0.7);">
            Ã—
          </div>
          <iframe
            id="heygen-iframe"
            src="https://labs.heygen.com/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiJlMzA1NDViNDgwNGM0YzhmYTM4NDg3YjViZTJkNmQ1YyIsInByZXZpZXdJbWciOiJodHRwczovL2ZpbGVzMi5oZXlnZW4uYWkvYXZhdGFyL3YzL2UzMDU0NWI0ODA0YzRjOGZhMzg0ODdiNWJlMmQ2ZDVjL2Z1bGwvMi4yL3ByZXZpZXdfdGFyZ2V0LndlYnAiLCJuZWVkUmVtb3ZlQmFja2dyb3VuZCI6ZmFsc2UsImtub3dsZWRnZUJhc2VJZCI6IjNhYTNjZjlhNzg1ZDQ1YmM5ZjcyYTZhNDI0ZmI2MDFmIiwidXNlcm5hbWUiOiJlNTFlZmYzZjJhYzA0ZGZjYjQ3MGQzNmM2OWRiMWNlNiJ9&inIFrame=1"
            width="100%" height="100%"
            allow="microphone; camera; autoplay; clipboard-write"
            sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
            allowfullscreen
            style="border:none;border-radius:16px;">
          </iframe>
        `;
        document.body.appendChild(frameWrap);

        // Close and fully stop avatar
        frameWrap.querySelector("#heygen-close").addEventListener("click", () => {
          const iframe = document.getElementById("heygen-iframe");
          if (iframe) iframe.src = "about:blank"; // kill stream
          frameWrap.remove();
          frameWrap = null;
        });
      });
    });
  </script>
</body>
</html>
